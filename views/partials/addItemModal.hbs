{{! views/partials/addItemModal.hbs }}
<button id="modalCloseBtn" class="modal-close-btn" aria-label="Close">Ã—</button>
<h2 id="modalTitle">{{modalTitle}}</h2>
<form id="modalForm" data-mode="{{mode}}" {{#if itemId}}data-item-id="{{itemId}}"{{/if}}>

    {/* Hidden fields for ADD mode (less critical if data is passed differently for edit) */}
    {{#if isAddMode}}
    <input type="hidden" id="modalMediaId" value="{{mediaId}}">
    <input type="hidden" id="modalMediaType" value="{{mediaType}}">
    <input type="hidden" id="modalTitleData" value="{{itemTitle}}">
    <input type="hidden" id="modalImageUrlData" value="{{imageUrl}}">
    <input type="hidden" id="modalApiDescriptionData" value="{{apiDescription}}">
    {{/if}}

    <div class="form-group">
        <label for="modalUserStatus">Your Status:</label>
        <select id="modalUserStatus" name="userStatus" required>
            <option value="" disabled {{#unless currentStatus}}selected{{/unless}}>-- Select Status --</option>
            {{#each validStatuses}}
            <option value="{{this}}" {{#if (eq this ../currentStatus)}}selected{{/if}}>
                {{capitalize this}}
            </option>
            {{/each}}
        </select>
    </div>
    <div class="form-group">
        <label for="modalUserRating">Your Rating (1-20):</label>
        <input type="number" id="modalUserRating" name="userRating" min="1" max="20" placeholder="Optional" value="{{currentRating}}">
    <div class="form-group">
        <label for="modalUserDescription">Your Notes:</label>
        <textarea id="modalUserDescription" name="userDescription" rows="3" placeholder="Optional">{{currentUserDescription}}</textarea>
    </div>
    <div class="modal-actions">
        <button type="button" id="modalCancelBtn" class="btn btn-secondary">Cancel</button>
        <button type="submit" class="btn btn-primary">{{submitButtonText}}</button>
    </div>
     <p id="modalError" class="modal-error-message hidden"></p>
</form>